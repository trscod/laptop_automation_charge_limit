Всем привет!
Для чего мне понадобилось писать этот скрипт? Все очень просто: Как и многие владельцы MacBook, 
я озадачился как сохранить жизнь батарее? После покупки я подключил его к розетке и отключаю редко.
Батарея поддерживает уровень заряда 100%, позволяя мне влюбую минуту отключиться от сети и иметь максимальную автономность.
Но мне это нужно крайне редко. А вот смотреть как уменяшается емкость аккумулятора не хочется.

Когда-то давно у меня был гоночный квадрокоптер. Это профессиональная техника, имеющая професиональный 4S Lithium Аккумуляторы.
Заряжал я их профессиональным же устройством IMAX B6. С тех пор я помню что у аккумуляторов есть режим хранения (storage mode).
Аккумулятор заряжается на 40-50% емкости и хранится так довольно долго без потери максимальной емкости. Не деградируют.
Конечно же, я решил применить этот storage mode к ноутбуку. Но производитель не предусмотрел чего-нибудь подобного. 

Я погуглил какую-то программу. И тоже ничего подходящего не нашел. Забегая вперед, скажу что программа есть. Она бесплатная. 
Называется "aldente". И найти ее по ключевым словам проблематики не так то просто.

Я увидел три варианта решения:
1. Найти системную команду, которая бы останавливала зарядку на определенном уровне, либо просто переключатель "Зарядка - работа от сети".
потратил несколько часов, но такой команды не нашел.
2. Использовать WiFi розетку с WEB интерфейсом или каким-то API. Есть как минимум один вариант такой розетки. Стоимость 3500 рублей.
3. Использовать какую-нибудь попсовую модель розетки, предназначенную для облачных систем.

Я выбрал 3-й вариант. Во-первых дешевле в 3,5 раза. Во-вторых, после получения результатов эксперимента, розетку можно переставить 
на другую задачу (например, выключать утюг).

И вот, выкладываю работающий код.
Как будет еще время, напишу больше комментов.
